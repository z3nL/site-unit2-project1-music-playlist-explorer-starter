/* Modal Open/Close Operations */
const modal = document.getElementById("playlistModal");
function toggleModal() {
    if (modal.style.display === "flex") {
        modal.style.display = "none";
        return;
    }
    modal.style.display = "flex";
}
window.onclick = function(event) {
   if (event.target === modal) {
      modal.style.display = "none";
   }
}

/* Data Loading Operations */
// All data, barring the first playlist and its content, was generated by Metamate

// Request and load data
async function loadData() {
    try {
        // Gather playlist array
        const response = await fetch('./data/data.json');
        if (!response.ok) {
            throw new Error('Data retrieval: bad response');
        }
        const playlists = await response.json();
        // Repeated use default image
        let heart = document.createElement("img");
            heart.id = 'heart';
            heart.src = './assets/img/hearticon.png';
            heart.alt = 'a heart icon';

        let base = document.getElementsByClassName("playlist-cards")[0];
        playlists.forEach(playlist => {
            let card = document.createElement("article");
                card.id = playlist.playlistID;

                let plCover = document.createElement("img");
                    plCover.id = 'cover';
                    plCover.onclick = toggleModal;
                    plCover.src = playlist.playlist_art;
                    plCover.alt =  'playlist cover';
                    card.appendChild(plCover);

                let title = document.createElement("h2");
                    title.textContent = playlist.playlist_name;
                    card.appendChild(title);

                let creator = document.createElement("p");
                    creator.textContent = playlist.playlist_author;
                    card.appendChild(creator);
                
                let lcDiv = document.createElement("div");
                    lcDiv.className = 'likecount';
                    let heart = document.createElement("img");
                        heart.id = 'heart';
                        heart.src = './assets/img/hearticon.png';
                        heart.alt = 'a heart icon';
                        lcDiv.appendChild(heart);
                    let likecount = document.createElement("p");
                        likecount.textContent = playlist.like_count;
                        lcDiv.appendChild(likecount);
                    card.appendChild(lcDiv);
                
            base.appendChild(card);
        });

    } catch (error) {
        console.error('Data retrieval: ', error);
    }
}
loadData();

const songCover = document.createElement("img");
    songCover.id = 'cover';
    songCover.src = './assets/img/song.png';
    songCover.alt = 'song cover';